{% load dynforms %}
{% load markup %}
{% load icons %}
<div id="{{ field.name }}-group"
     data-field-width="{{ field.width_styles }}"
     class="form-group {{ field.hide_styles }} {{ field.extra_styles }}">
    {% if field.field_type != 'newsection' %}
        {% if 'nolabel' not in field.options %}
            <label class="control-label"
                   {% if field.choices or field.field_type == 'address' %}{% else %}for="{{ field.name }}"{% endif %}>
                {{ field.label }}{% if field.is_required %}&nbsp;<span class="text-danger">&#x2217;</span>
                    &nbsp;{% endif %}
            </label>
            {% if field.instructions and field.field_type != 'newsection' %}
                <i class="df-info bi-info-circle-fill text-primary" data-bs-toggle="popover" data-placement="bottom"
                   data-trigger="hover"
                   title="{{ field.label }}" data-content="{{ field.instructions }}"></i>
            {% endif %}
            <span class="control-instructions hidden-xs text-narrow">
        <div style="display: flex; flex-direction: row; font-size: 105%; line-height: 1; align-items: center;">
            {% svg_icon "info-circle" %}
            <div style="flex: 1; padding-left: 0.5em;">{{ field.label }}</div>
        </div>
        <hr class="hr-xs"/>
        <span class="fg-help">
            {{ field.instructions|markdown }}
        </span>
    </span>
        {% endif %}
    {% endif %}
    {% if field.type %}
        {% if field.is_repeatable %}
            {% show_builder_field field repeatable=True %}
            <button data-repeat-add=".{{ field.name }}-repeatable"
                    class="btn btn-success btn-sm pull-right" title="Add {{ field.label }}"
                    name="add" type="button">{% svg_icon "plus" size="xs" %}
            </button>
        {% else %}
            {% show_builder_field field %}
        {% endif %}
    {% else %}

        <div>{{ field.field_type }} not implemented yet.</div>
    {% endif %}
</div>
<script>
    {% if "repeat" in field.options %}
        $('#{{field.name}}-group button[data-repeat-add]').repeatable();
    {% endif %}
</script>
